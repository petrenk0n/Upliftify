<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Upliftify</title>
  <link rel="stylesheet" href="../static/style.css">
  <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

</head>
<body>
    <div class="background-video">
        <img src="../static/final-logo.svg" id="logo">
        <video autoplay muted loop id="musicVid">
          <source src="../static/cover-video.mp4" type="video/mp4">
        </video>
    </div>

    <div class="about-section">
        <p id="description">Find music to elevate your mental state</p>
    </div>
    
    <!-- Main functionality will be in this div -->
    <div class="main" id="2">
      {% if scroll %}
      <script>
      document.getElementById('{{ scroll }}').scrollIntoView();
      // or
      document.location.hash = '#' + '{{ scroll }}';
      </script>
      {% endif %}
        <script src="../static/webcam.js"></script>
        <div id="my_camera" style="width:800px;height:700px; align-items: center;margin: auto;margin-bottom: 40px;"></div>
	    <div id="my_result" style="display: none;"></div>
	    <script language="JavaScript">
		    Webcam.attach('#my_camera');
		function take_snapshot() {
			Webcam.snap( function(data_uri) {
				document.getElementById('my_result').innerHTML = '<img src="'+data_uri+'"/>';
                // Sending the image to flask
                $.ajax({
					type: "GET",
					data: "myimage=" + encodeURIComponent(data_uri),
					url: "/upload",
					contentType: false,
					processData: false,
					success: function (jsonresult) {
              console.log("Success");
					}
				});
			});
		}
    </script>
    <div class="actions">
        <a href="javascript:void(take_snapshot(), myFunction())" class="btn">
        <div class="button">Take a picture</div></a>
        <a href="/identify" class="btn">
        <div class="button">Find the playlist</div></a>
        <div id="picture-taken">
          <p>Picture Taken! &#128077;</p>
        </div>
    </div>
    <script>
      function myFunction() {
        var x = document.getElementById("picture-taken");
        if (x.style.display === "none") {
          x.style.display = "none";
        } else {
          x.style.display = "block";
        }
      }
    </script>
    </div>
    <div class="spotify-player"></div>
    <section class="wave">
      <img src="../static/logo.svg" class="footer-logo">
    </section>
  <!-- <script src="js/scripts.js"></script> -->
  </script>
</body>
</html>